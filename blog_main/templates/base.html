{% load static %}
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Django Blogs</title>
    <link
      href="https://getbootstrap.com/docs/4.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Playfair+Display:700,900"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"
      integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link href="{% static 'css/blog.css' %}" rel="stylesheet" />

    <style>
      .toast-container {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      /* Base toast */
      .custom-toast {
        min-width: 260px;
        padding: 12px 16px;
        border-radius: 8px;
        color: #fff;
        font-weight: 500;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        animation:
          slideIn 0.4s ease,
          fadeOut 0.5s ease 3.5s forwards;
      }

      /* Message types */
      .custom-toast.success {
        background-color: #16a34a;
      }

      .custom-toast.error {
        background-color: #dc2626;
      }

      .custom-toast.warning {
        background-color: #f59e0b;
      }

      .custom-toast.info {
        background-color: #2563eb;
      }

      /* Animations */
      @keyframes slideIn {
        from {
          transform: translateX(100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      @keyframes fadeOut {
        to {
          opacity: 0;
          transform: translateX(100%);
        }
      }
    </style>
  </head>
  <body>
    <!-- Toast Container -->
    <div
      class="toast-container position-fixed bottom-0 end-0 p-3"
      style="z-index: 1055"
    >
      {% if messages %} {% for message in messages %}
      <div class="custom-toast {{ message.tags }}">{{ message }}</div>
      {% endfor %} {% endif %}
    </div>

    <!--Header Start-->
    <div class="container">
      <header class="blog-header py-3">
        <div class="row flex-nowrap justify-content-between align-items-center">
          <div class="col-4 pt-1">
            <a class="blog-header-logo text-dark" href="/">Django Blog</a>
          </div>
          <!--Search box start-->
          <div class="col-4">
            <form action="{% url 'search'%}" method="GET">
              <div class="input-group">
                <input
                  class="form-control"
                  type="text"
                  placeholder="Enter search term..."
                  aria-label="Enter search term..."
                  aria-describedby="button-search"
                  name="keyword"
                />
                <button
                  class="btn btn-warning"
                  id="button-search"
                  type="submit"
                >
                  Go!
                </button>
              </div>
            </form>
          </div>
          <!--Search box start-->

          {% if not user.is_authenticated %}
          <div class="col-4 d-flex justify-content-end align-items-center">
            <a class="btn btn-sm btn-warning" href="{% url 'login' %}">Login</a>
            &nbsp;
            <a
              class="btn btn-sm btn-outline-secondary"
              href="{% url 'register'%}"
            >
              Register
            </a>
          </div>
          {% else %}
          <div class="col-4 d-flex justify-content-end align-items-center">
            <span class="mr-2">Hello, {{user.username}}</span>
            <a class="btn btn-sm btn-warning mr-2" href="{% url 'dashboard' %}"
              >Dashboard</a
            >
            <a class="btn btn-sm btn-warning" href="{% url 'logout' %}"
              >Logout</a
            >
          </div>
          {% endif %}
        </div>
      </header>
      <!--Header End-->

      <!--Category Start-->
      <div class="nav-scroller py-1 mb-2">
        <nav class="nav d-flex justify-content-between">
          {% for cat in categories %}

          <a class="p-2 text-muted" href="{%url 'blogs_by_category' cat.id %}"
            >{{cat.category_name}}</a
          >
          {% endfor %}
        </nav>
      </div>
      <!--Category Start-->

      {% block content %}
      <!--Main Content body -->
      {% endblock content %}
    </div>

    <footer class="blog-footer">
      <p>Django blog built with ï¿½ by <a href="#">Rohan Chougule</a></p>
    </footer>

    <script>
      setTimeout(() => {
        document.querySelectorAll(".custom-toast").forEach((toast) => {
          toast.remove();
        });
      }, 4000); // 4 seconds
    </script>
  </body>
</html>
