{% extends "base.html" %} {% block content %}

<!-- Page content-->
<div class="container mt-5">
  <div class="row">
    <div class="col-lg-8">
      <!-- Post content-->
      <article>
        <!-- Post header-->
        <header class="mb-4">
          <!-- Post title-->
          <h1 class="fw-bolder mb-1">{{single_blog.title}}</h1>
          <!-- Post meta content-->
          <div class="text-muted fst-italic mb-2">
            Posted on {{single_blog.created_at}} by admin
          </div>
          <!-- Post category-->
          <a class="badge bg-primary text-decoration-none text-light" href="#!"
            >{{single_blog.category}}</a
          >
        </header>
        <!-- Preview image figure-->
        <figure class="mb-4">
          <img
            class="img-fluid rounded"
            src="{{single_blog.featured_image.url}}"
            alt="..."
          />
        </figure>
        <!-- Post content-->
        <section class="mb-5">
          <p class="fs-5 mb-4">
            {{single_blog.short_description}} <br />
            {{single_blog.blog_body}}
          </p>
        </section>
      </article>
      <!-- Comments section-->
      <section class="mb-5">
        <div class="card bg-light">
          <div class="card-body">
            <!-- Comment form-->
            <form method="POST" action="{% url 'blog_page' single_blog.slug %}">
              {% csrf_token %}
              <div class="mb-3">
                <label class="form-label" for="commentTextArea"
                  >Join the discussion and leave a comment!</label
                >
                <textarea
                  class="form-control"
                  id="commentTextArea"
                  rows="3"
                  name="commment"
                ></textarea>
              </div>
              {% if user.is_authenticated %}
              <button class="btn btn-primary" type="submit">Submit</button>
              {% else %} Log in to post a comment {% endif %}
            </form>
          </div>
        </div>

        <!-- Single comment-->
        {% for comm in comments %}
        <div class="d-flex my-2 border p-2">
          <!-- Parent comment-->
          <div class="">
            <p class="text-dark">"{{comm.content}}"</p>
            <div class="text-muted">
              By - {{comm.user}} | {{comm.created_at|timesince}} ago
            </div>
          </div>
        </div>
        {% endfor %}
      </section>
    </div>
    <!-- Side widgets-->
    <div class="col-lg-4">
      <!-- Search widget-->
      <div class="card mb-4">
        <div class="card-header">Search</div>
        <div class="card-body">
          <div class="input-group">
            <input
              class="form-control"
              type="text"
              placeholder="Enter search term..."
              aria-label="Enter search term..."
              aria-describedby="button-search"
            />
            <button class="btn btn-primary" id="button-search" type="button">
              Go!
            </button>
          </div>
        </div>
      </div>
      <!-- Categories widget-->
      <div class="card mb-4 p-3">
        <h4 class="font-italic">Categories</h4>
        <div class="card-body">
          <div class="row">
            <div class="col-sm-6">
              <ul class="list-unstyled mb-0">
                {% for cat in categories %}
                <li>
                  <a href="{% url 'blogs_by_category' cat.id  %}"
                    >{{cat.category_name}}</a
                  >
                </li>
                {% endfor %}
              </ul>
            </div>
          </div>
        </div>
      </div>
      <!-- Side widget-->
      <div class="card mb-4 p-3">
        <h4 class="font-italic">Follow Us</h4>
        <ol class="list-unstyled">
          <li><a href="#">GitHub</a></li>
          <li><a href="#">LinkedIn</a></li>
        </ol>
      </div>
    </div>
  </div>
</div>
{% endblock content %}
